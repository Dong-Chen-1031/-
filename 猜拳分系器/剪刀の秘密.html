<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>猜拳？！</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body{height: 100%;background-color: #092846;color: #f5f5f5;}
        p{font-size: 25px;}
        span{font-size: 23px;}
    </style>
</head>
<body>
    <h2 style="text-align:center">猜拳？！最專業的猜拳分析系統</h2>
    <h3 style="text-align:center"><b>by.陳柏東</b></h3>
    <div style="text-align:center">
        <span>人數：</span>
        <input type="number" id="num" style="width:90px;font-size: 22px;">
        <br>
        <input type="button" value="送出" style="background-color:#cf7c1d;margin-top:10px;color: #f5f5f5;border: 0px;font-size: 18px;" onclick="Print()">
        <div>
            <div id="bt2" style="background-color:#cf7c1d;display:inline-block;width: 45%;margin: 1%;font-size: 20px;" onclick="document.getElementById('text').style.display='block';document.getElementById('nn').style.display='none'">全部可能性</div>
            <div id="bt1" style="background-color:#cf7c1d;display:inline-block;width: 45%;margin: 1%;font-size: 20px;" onclick="document.getElementById('text').style.display='none';document.getElementById('nn').style.display='block'">資料統計</div>
        </div>
        <div id="text">
        </div>
        <div id="nn">
            <p id="wine">贏：- 次（--%）</p>
            <p id="lose">輸：- 次（--%）</p>
            <p id="pp">平手：- 次（--%）</p>
            <p id="all">共計：- 次（--%）</p>
            <p>============================</p>
        </div>
    </div>
    <script>
        const 剪刀 = '剪刀'
        const 石頭 = '石頭'
        const 布   = '布　'
        const 平手   = '平手'
        const 輸   = '輸　'
        const 贏   = '贏　'
        function 列出可能性(人數,哪一種) {
            var 可能的組合=Math.pow(3,人數)
            var 出拳=[]
            var 總出拳=[]
            for (let z = 1; z <= 可能的組合; z++) {
                switch (哪一種) {
                    case 1:
                        總出拳.push(全部人出拳值運算(z,人數))       
                        break;
                    case 2:
                        總出拳.push(全部人出拳值運算2(z,人數))       
                    default:
                        break;
                }
            }
            return 總出拳
        }
        function 全部人出拳值運算(z,人數) {
            var a可能的組合2=Math.pow(3,人數)
            var b最低值=0
            var 出拳=[]
            for (let i = 1; i <= 人數; i++) {
                // console.log("((a可能的組合2/3)+b最低值) = ",((a可能的組合2/3)+b最低值))
                // console.log("(((a可能的組合2/3)*2)+b最低值) = ",(((a可能的組合2/3)*2)+b最低值))
                // console.log("(a可能的組合2+b最低值) = ",(a可能的組合2+b最低值))
                if (z<=((a可能的組合2/3)+b最低值)) {
                    出拳.push(剪刀)
                    a可能的組合2=(a可能的組合2/3)
                }else if(z<=(((a可能的組合2/3)*2)+b最低值)){
                    出拳.push(石頭)
                    a可能的組合2=(a可能的組合2/3)
                    b最低值=(a可能的組合2)
                }else if(z<=(a可能的組合2+b最低值)){
                    出拳.push(布)
                    a可能的組合2=(a可能的組合2/3)
                    b最低值=(a可能的組合2*2)
                }else{
                    console.log('Error')
                }
            }
            return 出拳
        }
        function 全部人出拳值運算2(z,人數) {
            var a可能的組合2=Math.pow(3,人數)
            var 出拳=[]
            for (let i = 0; i < 人數; i++) {
                var a選項=a可能的組合2/3
                var b選項,c選項
                for (let i = 0; i < 出拳.length; i++) {
                    const 這次選的 = 出拳[i];
                    switch (這次選的) {
                        case 剪刀:
                            a選項=a選項/3
                            break
                        case 石頭:
                            a選項=a選項/3*2
                            break
                        case 布:
                            a選項=a選項
                            break
                    }
                    b選項=a選項*2
                    c選項=a選項*3
                }
                if (z<=a選項) {
                    出拳.push(剪刀)
                }else if(z<=b選項){
                    出拳.push(石頭)
                }else if(z<=c選項){
                    出拳.push(布)
                }else{
                    console.log('Error')
                }
            }
            return 出拳
        }
        function 列出可能性2(人數) {
            const p可能的組合=Math.pow(3,人數)
            console.log(p可能的組合)
            var o總出拳=[]
            for (let temp = 0; temp < p可能的組合; temp++) {
               o總出拳.push([])
            }
            console.log("🚀 ~ file: 剪刀の秘密.html ~ line 96 ~ 列出可能性2 ~ o總出拳", o總出拳)
            for (let x = 0; x < 人數; x++) {
                var z=0
                var v=1
                if (x>0) {
                    v=Math.pow(3,x)
                }
                while (true) {
                    for (let y = 0; y < v; y++) {
                        const q出拳 = o總出拳[z];
                        q出拳.push(剪刀)
                        z++
                    }
                    for (let y = 0; y < v; y++) {
                        const q出拳 = o總出拳[z];
                        q出拳.push(石頭)
                        z++
                    }
                    for (let y = 0; y < v; y++) {
                        const q出拳 = o總出拳[z];
                        q出拳.push(布)
                        z++
                    }
                    if (z>=p可能的組合) {
                        break
                    }
                    console.log("🚀 ~ file: 剪刀の秘密.html ~ line 108 ~ 列出可能性2 ~ z", z,';',p可能的組合)
                }
            }
            return o總出拳
        }
        function WinOrLose(r出拳) {
            let u=f平手(r出拳)
            console.log("🚀 ~ file: 剪刀の秘密.html ~ line 132 ~ WinOrLose ~ u", u)
            let 回傳=[]
            if (!u){
                for (let i = 0; i < r出拳.length; i++) {
                    回傳[i]=平手
                }
                return 回傳
            }
            if (u[0]&&u[1]) {
                for (let i = 0; i < r出拳.length; i++) {
                    const el = r出拳[i];
                    if (el==剪刀) {
                        回傳.push(輸)
                    }else if (el==石頭) {
                        回傳.push(贏)
                    }
                }
            }else if (u[0]&&u[2]) {
                for (let i = 0; i < r出拳.length; i++) {
                    const el = r出拳[i];
                    if (el==布) {
                        回傳.push(輸)
                    }else if (el==剪刀) {
                        回傳.push(贏)
                    }
                }
            }else if (u[1]&&u[2]) {
                for (let i = 0; i < r出拳.length; i++) {
                    const el = r出拳[i];
                    if (el==石頭) {
                        回傳.push(輸)
                    }else if (el==布) {
                        回傳.push(贏)
                    }
                }
            }
            return 回傳
        }
        function f平手(w出拳) {
            let a剪刀=0
            let a石頭=0
            let a布=0
            for (let i = 0; i < w出拳.length; i++) {
                const ei = w出拳[i];
                if (ei==剪刀) {
                    a剪刀=1
                }else if(ei==石頭){
                    a石頭=1
                }else if (ei==布) {
                    a布=1
                }
            }
            b合=a剪刀+a石頭+a布
            if ((b合==1)||(b合==3)) {
                return 0
            }
            return [a剪刀,a石頭,a布]
        }
        function Print() {
            var num=document.getElementById('num').value
            var text=document.getElementById('text')
            console.log("🚀 ~ file: 剪刀の秘密.html ~ line 198 ~ Print ~ num", num)
            if (num==0||num==1) {
                alert('人數不能為0或1')
            }
            a=列出可能性2(num)
            let te=''
            let t輸=0,t平手=0,t贏=0
            for (let i = 0; i < a.length; i++) {
                const element = a[i];
                te=te+String(element);
                te=te+'　：'
                c=WinOrLose(element)[0]
                te=te+c
                te=te+'\n'
                if (!((i+1)%3)) {
                    te=te+'=======================================\n'
                }
                switch (c) {
                    case 輸:
                        t輸++
                        break;
                    case 贏:
                        t贏++
                        break
                    case 平手:
                        t平手++
                        break
                }
            }
            let aa=(t平手+t贏+t輸)
            document.getElementById('text').innerText=te
            document.getElementById('lose').innerText='輸：'+t輸+'次（'+(t輸/aa)*100+'%）'
            document.getElementById('wine').innerText='贏：'+t贏+'次（'+(t贏/aa)*100+'%）'
            document.getElementById('pp').innerText='平手：'+t平手+'次（'+(t平手/aa)*100+'%）'
            document.getElementById('all').innerText='共計：'+aa+'次（'+(aa/aa)*100+'%）'
        }
    </script>
</body>
</html>